{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect}from\"react\";import{connect}from\"react-redux\";import{setSearchPageFiltersCourseLevel,setSearchPageFiltersCourseNextSemester,setSearchPageFiltersCourseRequirements,setSearchPageFiltersCourseCreditHours,setSearchPageFiltersTimeofDay,resetSearchPageFilters}from\"../../../../actions/filtersActions\";import{setCourses}from\"../../../../actions/fetchDataActions\";import{requirementsValues,courseLevelFilterValues,creditHoursValues,timeofDayValues}from\"../../../../data/FilterSelectsData\";import FilterSelect from\"../../../../components/FilterSelect\";import{Card,Button,Form}from\"react-bootstrap\";import\"../../results.css\";var FiltersCard=function FiltersCard(props){var handleSwitchChange=function handleSwitchChange(e){if(props.resultsPage.filtersCard.next_sem.value===1){props.setSearchPageFiltersCourseNextSemester(0);// applyFilters(0);\n}if(props.resultsPage.filtersCard.next_sem.value===0){props.setSearchPageFiltersCourseNextSemester(1);// applyFilters(1);\n}// applyFilters();\n};var handleChange=function handleChange(e){if(e.target.name===\"courseLevel\"){props.setSearchPageFiltersCourseLevel(e.target.value);}else if(e.target.name===\"creditHours\"){props.setSearchPageFiltersCourseCreditHours(e.target.value);}else if(e.target.name===\"timeofDay\"){props.setSearchPageFiltersTimeofDay(e.target.value);}else if(e.target.name===\"requirements\"){props.setSearchPageFiltersCourseRequirements(e.target.value);}else{}// applyFilters();\n};var applyFilters=function applyFilters(){props.setCurrentPage(1);props.setCourses(props.courses);// functions all depend on one-another, the filters are all activated by calling filterByRequirements\n// eslint-disable-next-line array-callback-return\nvar semesterFilteredCourses=props.courses.filter(function(course){if(props.resultsPage.filtersCard.next_sem.value===0){return course.taught_next_semester===false;}else if(props.resultsPage.filtersCard.next_sem.value===1){return course.taught_next_semester===true;}});var filterByTime=function filterByTime(semesterFilteredCourses){if(props.resultsPage.filtersCard.timeofDay.value!==\"\"&&semesterFilteredCourses.length>0){var filteredCourses=semesterFilteredCourses.filter(function(course){var instructorsWithValue=course.instructors.some(function(_ref){var timings=_ref.timings;return timings[0].some(function(timing){return timing===props.resultsPage.filtersCard.timeofDay.value;});});return instructorsWithValue;});return filteredCourses;}else{return semesterFilteredCourses;}};var filterByCourseLevel=function filterByCourseLevel(){var lowerLevelCourses=filterByTime(semesterFilteredCourses).filter(function(course){return course.code<=299;});var middleLevelCourses=filterByTime(semesterFilteredCourses).filter(function(course){return course.code>=300&&course.code<=399;});var upperLevelCourses=filterByTime(semesterFilteredCourses).filter(function(course){return course.code>=400&&course.code<=499;});var graduateLevelCourses=filterByTime(semesterFilteredCourses).filter(function(course){return course.code>499;});if(props.resultsPage.filtersCard.courseLevel.value===12){return lowerLevelCourses;}else if(props.resultsPage.filtersCard.courseLevel.value===8){return middleLevelCourses;}else if(props.resultsPage.filtersCard.courseLevel.value===9){return upperLevelCourses;}else if(props.resultsPage.filtersCard.courseLevel.value===10){return graduateLevelCourses;}else if(props.resultsPage.filtersCard.courseLevel.value===\"\"){return filterByTime(semesterFilteredCourses);}else{return filterByTime(semesterFilteredCourses);}};var filterByCreditHours=function filterByCreditHours(){if(props.resultsPage.filtersCard.creditHours.value!==\"\"){var creditsFilteredCourses=filterByCourseLevel().filter(function(course){return course.credits===props.resultsPage.filtersCard.creditHours.value;});return creditsFilteredCourses;}else{return filterByCourseLevel();}};var filterByRequirements=function filterByRequirements(){if(props.resultsPage.filtersCard.requirements.value!==\"\"){var requirementsFilteredCourses=filterByCreditHours().filter(function(course){var desiredCredits=course.credits_fulfilled.some(function(credit){return credit===props.resultsPage.filtersCard.requirements.value;});return desiredCredits;});return props.setCourses(requirementsFilteredCourses);}else return props.setCourses(filterByCreditHours());};filterByRequirements();};var handleFiltersReset=function handleFiltersReset(e){e.preventDefault();props.resetSearchPageFilters();props.setCourses(props.courses);};// filters reset and are applied on initial page render\nuseEffect(function(){props.resetSearchPageFilters();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);// filters are applied on every handleChange\nuseEffect(function(){applyFilters();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[props.resultsPage.filtersCard.next_sem.value,props.resultsPage.filtersCard.courseLevel.value,props.resultsPage.filtersCard.requirements.value,props.resultsPage.filtersCard.creditHours.value,props.resultsPage.filtersCard.timeofDay.value,resetSearchPageFilters]);return/*#__PURE__*/_jsx(\"div\",{className:\"mb-5\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{className:\"mb-2 text-muted filterCardTitle\",children:\"Filter courses\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Card.Subtitle,{className:\"mb-2 text-muted filterCardBtnLabel\",children:\"Avail. Next Term\"}),/*#__PURE__*/_jsx(Form.Check,{className:\"filterCardSwitch switch-danger\",type:\"switch\",id:\"course-filter-next-semester-switch\",checked:props.resultsPage.filtersCard.next_sem.value===1,value:props.resultsPage.filtersCard.next_sem.value// label=\"Next Semester Only\"\n,onChange:handleSwitchChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(FilterSelect,{select_id:\"courseLevel\",handleSelectChange:handleChange,selectValues:courseLevelFilterValues,selectValue:props.resultsPage.filtersCard.courseLevel.value}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(FilterSelect,{select_id:\"requirements\",handleSelectChange:handleChange,selectValues:requirementsValues,selectValue:props.resultsPage.filtersCard.requirements.value}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(FilterSelect,{select_id:\"creditHours\",handleSelectChange:handleChange,selectValues:creditHoursValues,selectValue:props.resultsPage.filtersCard.creditHours.value}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(FilterSelect,{select_id:\"timeofDay\",handleSelectChange:handleChange,selectValues:timeofDayValues,selectValue:props.resultsPage.filtersCard.timeofDay.value}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"filterBtnContainer\",children:/*#__PURE__*/_jsx(Button,{className:\"filterBtn\",onClick:handleFiltersReset,children:\"Reset\"})})]})})});};var mapStateToProps=function mapStateToProps(state){return{courses:state.courses,displayedCourses:state.displayedCourses,filters:state.filters,resultsPage:state.resultsPage};};export default connect(mapStateToProps,{setCourses:setCourses,setSearchPageFiltersCourseLevel:setSearchPageFiltersCourseLevel,setSearchPageFiltersCourseNextSemester:setSearchPageFiltersCourseNextSemester,setSearchPageFiltersCourseRequirements:setSearchPageFiltersCourseRequirements,setSearchPageFiltersCourseCreditHours:setSearchPageFiltersCourseCreditHours,setSearchPageFiltersTimeofDay:setSearchPageFiltersTimeofDay,resetSearchPageFilters:resetSearchPageFilters})(FiltersCard);","map":{"version":3,"sources":["/Users/sam4munro/Desktop/webdev/portfolio/easyscore/the-easy-score/src/screens/searchresults/components/filters/FiltersCard.js"],"names":["React","useEffect","connect","setSearchPageFiltersCourseLevel","setSearchPageFiltersCourseNextSemester","setSearchPageFiltersCourseRequirements","setSearchPageFiltersCourseCreditHours","setSearchPageFiltersTimeofDay","resetSearchPageFilters","setCourses","requirementsValues","courseLevelFilterValues","creditHoursValues","timeofDayValues","FilterSelect","Card","Button","Form","FiltersCard","props","handleSwitchChange","e","resultsPage","filtersCard","next_sem","value","handleChange","target","name","applyFilters","setCurrentPage","courses","semesterFilteredCourses","filter","course","taught_next_semester","filterByTime","timeofDay","length","filteredCourses","instructorsWithValue","instructors","some","timings","timing","filterByCourseLevel","lowerLevelCourses","code","middleLevelCourses","upperLevelCourses","graduateLevelCourses","courseLevel","filterByCreditHours","creditHours","creditsFilteredCourses","credits","filterByRequirements","requirements","requirementsFilteredCourses","desiredCredits","credits_fulfilled","credit","handleFiltersReset","preventDefault","mapStateToProps","state","displayedCourses","filters"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport {\n  setSearchPageFiltersCourseLevel,\n  setSearchPageFiltersCourseNextSemester,\n  setSearchPageFiltersCourseRequirements,\n  setSearchPageFiltersCourseCreditHours,\n  setSearchPageFiltersTimeofDay,\n  resetSearchPageFilters,\n} from \"../../../../actions/filtersActions\";\n\nimport { setCourses } from \"../../../../actions/fetchDataActions\";\n\nimport {\n  requirementsValues,\n  courseLevelFilterValues,\n  creditHoursValues,\n  timeofDayValues,\n} from \"../../../../data/FilterSelectsData\";\n\nimport FilterSelect from \"../../../../components/FilterSelect\";\n\nimport { Card, Button, Form } from \"react-bootstrap\";\n\nimport \"../../results.css\";\n\nconst FiltersCard = (props) => {\n  const handleSwitchChange = (e) => {\n    if (props.resultsPage.filtersCard.next_sem.value === 1) {\n      props.setSearchPageFiltersCourseNextSemester(0);\n      // applyFilters(0);\n    }\n    if (props.resultsPage.filtersCard.next_sem.value === 0) {\n      props.setSearchPageFiltersCourseNextSemester(1);\n      // applyFilters(1);\n    }\n    // applyFilters();\n  };\n\n  const handleChange = (e) => {\n    if (e.target.name === \"courseLevel\") {\n      props.setSearchPageFiltersCourseLevel(e.target.value);\n    } else if (e.target.name === \"creditHours\") {\n      props.setSearchPageFiltersCourseCreditHours(e.target.value);\n    } else if (e.target.name === \"timeofDay\") {\n      props.setSearchPageFiltersTimeofDay(e.target.value);\n    } else if (e.target.name === \"requirements\") {\n      props.setSearchPageFiltersCourseRequirements(e.target.value);\n    } else {\n    }\n    // applyFilters();\n  };\n\n  const applyFilters = () => {\n    props.setCurrentPage(1);\n\n    props.setCourses(props.courses);\n\n    // functions all depend on one-another, the filters are all activated by calling filterByRequirements\n    // eslint-disable-next-line array-callback-return\n    const semesterFilteredCourses = props.courses.filter((course) => {\n      if (props.resultsPage.filtersCard.next_sem.value === 0) {\n        return course.taught_next_semester === false;\n      } else if (props.resultsPage.filtersCard.next_sem.value === 1) {\n        return course.taught_next_semester === true;\n      }\n    });\n\n    const filterByTime = (semesterFilteredCourses) => {\n      if (\n        props.resultsPage.filtersCard.timeofDay.value !== \"\" &&\n        semesterFilteredCourses.length > 0\n      ) {\n        let filteredCourses = semesterFilteredCourses.filter((course) => {\n          let instructorsWithValue = course.instructors.some(({ timings }) =>\n            timings[0].some(\n              (timing) =>\n                timing === props.resultsPage.filtersCard.timeofDay.value\n            )\n          );\n          return instructorsWithValue;\n        });\n        return filteredCourses;\n      } else {\n        return semesterFilteredCourses;\n      }\n    };\n\n    const filterByCourseLevel = () => {\n      const lowerLevelCourses = filterByTime(semesterFilteredCourses).filter(\n        (course) => {\n          return course.code <= 299;\n        }\n      );\n      const middleLevelCourses = filterByTime(semesterFilteredCourses).filter(\n        (course) => {\n          return course.code >= 300 && course.code <= 399;\n        }\n      );\n      const upperLevelCourses = filterByTime(semesterFilteredCourses).filter(\n        (course) => {\n          return course.code >= 400 && course.code <= 499;\n        }\n      );\n      const graduateLevelCourses = filterByTime(semesterFilteredCourses).filter(\n        (course) => {\n          return course.code > 499;\n        }\n      );\n\n      if (props.resultsPage.filtersCard.courseLevel.value === 12) {\n        return lowerLevelCourses;\n      } else if (props.resultsPage.filtersCard.courseLevel.value === 8) {\n        return middleLevelCourses;\n      } else if (props.resultsPage.filtersCard.courseLevel.value === 9) {\n        return upperLevelCourses;\n      } else if (props.resultsPage.filtersCard.courseLevel.value === 10) {\n        return graduateLevelCourses;\n      } else if (props.resultsPage.filtersCard.courseLevel.value === \"\") {\n        return filterByTime(semesterFilteredCourses);\n      } else {\n        return filterByTime(semesterFilteredCourses);\n      }\n    };\n\n    const filterByCreditHours = () => {\n      if (props.resultsPage.filtersCard.creditHours.value !== \"\") {\n        const creditsFilteredCourses = filterByCourseLevel().filter(\n          (course) => {\n            return (\n              course.credits === props.resultsPage.filtersCard.creditHours.value\n            );\n          }\n        );\n        return creditsFilteredCourses;\n      } else {\n        return filterByCourseLevel();\n      }\n    };\n\n    const filterByRequirements = () => {\n      if (props.resultsPage.filtersCard.requirements.value !== \"\") {\n        const requirementsFilteredCourses = filterByCreditHours().filter(\n          (course) => {\n            let desiredCredits = course.credits_fulfilled.some(\n              (credit) =>\n                credit === props.resultsPage.filtersCard.requirements.value\n            );\n            return desiredCredits;\n          }\n        );\n        return props.setCourses(requirementsFilteredCourses);\n      } else return props.setCourses(filterByCreditHours());\n    };\n    filterByRequirements();\n  };\n\n  const handleFiltersReset = (e) => {\n    e.preventDefault();\n    props.resetSearchPageFilters();\n    props.setCourses(props.courses);\n  };\n\n  // filters reset and are applied on initial page render\n  useEffect(() => {\n    props.resetSearchPageFilters();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // filters are applied on every handleChange\n  useEffect(() => {\n    applyFilters();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    props.resultsPage.filtersCard.next_sem.value,\n    props.resultsPage.filtersCard.courseLevel.value,\n    props.resultsPage.filtersCard.requirements.value,\n    props.resultsPage.filtersCard.creditHours.value,\n    props.resultsPage.filtersCard.timeofDay.value,\n    resetSearchPageFilters,\n  ]);\n\n  return (\n    <div className=\"mb-5\">\n      <Card>\n        <Card.Body>\n          <Card.Title className=\"mb-2 text-muted filterCardTitle\">\n            Filter courses\n          </Card.Title>\n          <hr></hr>\n          <br />\n\n          <Card.Subtitle className=\"mb-2 text-muted filterCardBtnLabel\">\n            Avail. Next Term\n          </Card.Subtitle>\n          <Form.Check\n            className=\"filterCardSwitch switch-danger\"\n            type=\"switch\"\n            id=\"course-filter-next-semester-switch\"\n            checked={props.resultsPage.filtersCard.next_sem.value === 1}\n            value={props.resultsPage.filtersCard.next_sem.value}\n            // label=\"Next Semester Only\"\n            onChange={handleSwitchChange}\n          />\n          <br />\n\n          <FilterSelect\n            select_id={\"courseLevel\"}\n            handleSelectChange={handleChange}\n            selectValues={courseLevelFilterValues}\n            selectValue={props.resultsPage.filtersCard.courseLevel.value}\n          />\n          <br />\n\n          <FilterSelect\n            select_id={\"requirements\"}\n            handleSelectChange={handleChange}\n            selectValues={requirementsValues}\n            selectValue={props.resultsPage.filtersCard.requirements.value}\n          />\n          <br />\n\n          <FilterSelect\n            select_id={\"creditHours\"}\n            handleSelectChange={handleChange}\n            selectValues={creditHoursValues}\n            selectValue={props.resultsPage.filtersCard.creditHours.value}\n          />\n          <br />\n\n          <FilterSelect\n            select_id={\"timeofDay\"}\n            handleSelectChange={handleChange}\n            selectValues={timeofDayValues}\n            selectValue={props.resultsPage.filtersCard.timeofDay.value}\n          />\n          <br />\n          <br />\n          <div className=\"filterBtnContainer\">\n            {/* <Button className=\"filterBtn\" onClick={applyFilters}>\n              Apply\n            </Button> */}\n            <Button className=\"filterBtn\" onClick={handleFiltersReset}>\n              Reset\n            </Button>\n          </div>\n        </Card.Body>\n      </Card>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    courses: state.courses,\n    displayedCourses: state.displayedCourses,\n    filters: state.filters,\n    resultsPage: state.resultsPage,\n  };\n};\n\nexport default connect(mapStateToProps, {\n  setCourses,\n  setSearchPageFiltersCourseLevel,\n  setSearchPageFiltersCourseNextSemester,\n  setSearchPageFiltersCourseRequirements,\n  setSearchPageFiltersCourseCreditHours,\n  setSearchPageFiltersTimeofDay,\n  resetSearchPageFilters,\n})(FiltersCard);\n"]},"metadata":{},"sourceType":"module"}