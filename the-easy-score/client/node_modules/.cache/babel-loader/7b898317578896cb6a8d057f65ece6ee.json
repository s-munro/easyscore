{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/sam4munro/Desktop/webdev/portfolio/easyscore/the-easy-score/src/screens/searchresults/components/filters/FiltersCard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { setSearchPageFiltersCourseLevel, setSearchPageFiltersCourseNextSemester, setSearchPageFiltersCourseRequirements, setSearchPageFiltersCourseCreditHours, setSearchPageFiltersTimeofDay, resetSearchPageFilters } from \"../../../../actions/filtersActions\";\nimport { setCourses } from \"../../../../actions/fetchDataActions\";\nimport { requirementsValues, courseLevelFilterValues, creditHoursValues, timeofDayValues } from \"../../../../data/FilterSelectsData\";\nimport FilterSelect from \"../../../../components/FilterSelect\";\nimport { Card, Button, Form } from \"react-bootstrap\";\nimport \"../../results.css\";\n\nconst FiltersCard = props => {\n  _s();\n\n  const handleSwitchChange = e => {\n    if (props.resultsPage.filtersCard.next_sem.value === 1) {\n      props.setSearchPageFiltersCourseNextSemester(0); // applyFilters(0);\n    }\n\n    if (props.resultsPage.filtersCard.next_sem.value === 0) {\n      props.setSearchPageFiltersCourseNextSemester(1); // applyFilters(1);\n    } // applyFilters();\n\n  };\n\n  const handleChange = e => {\n    if (e.target.name === \"courseLevel\") {\n      props.setSearchPageFiltersCourseLevel(e.target.value);\n    } else if (e.target.name === \"creditHours\") {\n      props.setSearchPageFiltersCourseCreditHours(e.target.value);\n    } else if (e.target.name === \"timeofDay\") {\n      props.setSearchPageFiltersTimeofDay(e.target.value);\n    } else if (e.target.name === \"requirements\") {\n      props.setSearchPageFiltersCourseRequirements(e.target.value);\n    } else {} // applyFilters();\n\n  };\n\n  const applyFilters = () => {\n    props.setCurrentPage(1);\n    props.setCourses(props.courses); // functions all depend on one-another, the filters are all activated by calling filterByRequirements\n    // eslint-disable-next-line array-callback-return\n\n    const semesterFilteredCourses = props.courses.filter(course => {\n      if (props.resultsPage.filtersCard.next_sem.value === 0) {\n        return course.taught_next_semester === false;\n      } else if (props.resultsPage.filtersCard.next_sem.value === 1) {\n        return course.taught_next_semester === true;\n      }\n    });\n\n    const filterByTime = semesterFilteredCourses => {\n      if (props.resultsPage.filtersCard.timeofDay.value !== \"\" && semesterFilteredCourses.length > 0) {\n        let filteredCourses = semesterFilteredCourses.filter(course => {\n          let instructorsWithValue = course.instructors.some(({\n            timings\n          }) => timings[0].some(timing => timing === props.resultsPage.filtersCard.timeofDay.value));\n          return instructorsWithValue;\n        });\n        return filteredCourses;\n      } else {\n        return semesterFilteredCourses;\n      }\n    };\n\n    const filterByCourseLevel = () => {\n      const lowerLevelCourses = filterByTime(semesterFilteredCourses).filter(course => {\n        return course.code <= 299;\n      });\n      const middleLevelCourses = filterByTime(semesterFilteredCourses).filter(course => {\n        return course.code >= 300 && course.code <= 399;\n      });\n      const upperLevelCourses = filterByTime(semesterFilteredCourses).filter(course => {\n        return course.code >= 400 && course.code <= 499;\n      });\n      const graduateLevelCourses = filterByTime(semesterFilteredCourses).filter(course => {\n        return course.code > 499;\n      });\n\n      if (props.resultsPage.filtersCard.courseLevel.value === 12) {\n        return lowerLevelCourses;\n      } else if (props.resultsPage.filtersCard.courseLevel.value === 8) {\n        return middleLevelCourses;\n      } else if (props.resultsPage.filtersCard.courseLevel.value === 9) {\n        return upperLevelCourses;\n      } else if (props.resultsPage.filtersCard.courseLevel.value === 10) {\n        return graduateLevelCourses;\n      } else if (props.resultsPage.filtersCard.courseLevel.value === \"\") {\n        return filterByTime(semesterFilteredCourses);\n      } else {\n        return filterByTime(semesterFilteredCourses);\n      }\n    };\n\n    const filterByCreditHours = () => {\n      if (props.resultsPage.filtersCard.creditHours.value !== \"\") {\n        const creditsFilteredCourses = filterByCourseLevel().filter(course => {\n          return course.credits === props.resultsPage.filtersCard.creditHours.value;\n        });\n        return creditsFilteredCourses;\n      } else {\n        return filterByCourseLevel();\n      }\n    };\n\n    const filterByRequirements = () => {\n      if (props.resultsPage.filtersCard.requirements.value !== \"\") {\n        const requirementsFilteredCourses = filterByCreditHours().filter(course => {\n          let desiredCredits = course.credits_fulfilled.some(credit => credit === props.resultsPage.filtersCard.requirements.value);\n          return desiredCredits;\n        });\n        return props.setCourses(requirementsFilteredCourses);\n      } else return props.setCourses(filterByCreditHours());\n    };\n\n    filterByRequirements();\n  };\n\n  const handleFiltersReset = e => {\n    e.preventDefault();\n    props.resetSearchPageFilters();\n    props.setCourses(props.courses);\n  }; // filters reset and are applied on initial page render\n\n\n  useEffect(() => {\n    props.resetSearchPageFilters(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // filters are applied on every handleChange\n\n  useEffect(() => {\n    applyFilters(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.resultsPage.filtersCard.next_sem.value, props.resultsPage.filtersCard.courseLevel.value, props.resultsPage.filtersCard.requirements.value, props.resultsPage.filtersCard.creditHours.value, props.resultsPage.filtersCard.timeofDay.value, resetSearchPageFilters]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mb-5\",\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      children: /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n          className: \"mb-2 text-muted filterCardTitle\",\n          children: \"Filter courses\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card.Subtitle, {\n          className: \"mb-2 text-muted filterCardBtnLabel\",\n          children: \"Avail. Next Term\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Check, {\n          className: \"filterCardSwitch switch-danger\",\n          type: \"switch\",\n          id: \"course-filter-next-semester-switch\",\n          checked: props.resultsPage.filtersCard.next_sem.value === 1,\n          value: props.resultsPage.filtersCard.next_sem.value // label=\"Next Semester Only\"\n          ,\n          onChange: handleSwitchChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FilterSelect, {\n          select_id: \"courseLevel\",\n          handleSelectChange: handleChange,\n          selectValues: courseLevelFilterValues,\n          selectValue: props.resultsPage.filtersCard.courseLevel.value\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FilterSelect, {\n          select_id: \"requirements\",\n          handleSelectChange: handleChange,\n          selectValues: requirementsValues,\n          selectValue: props.resultsPage.filtersCard.requirements.value\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FilterSelect, {\n          select_id: \"creditHours\",\n          handleSelectChange: handleChange,\n          selectValues: creditHoursValues,\n          selectValue: props.resultsPage.filtersCard.creditHours.value\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FilterSelect, {\n          select_id: \"timeofDay\",\n          handleSelectChange: handleChange,\n          selectValues: timeofDayValues,\n          selectValue: props.resultsPage.filtersCard.timeofDay.value\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filterBtnContainer\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            className: \"filterBtn\",\n            onClick: handleFiltersReset,\n            children: \"Reset\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 185,\n    columnNumber: 5\n  }, this);\n};\n\n_s(FiltersCard, \"3ubReDTFssvu4DHeldAg55cW/CI=\");\n\n_c = FiltersCard;\n\nconst mapStateToProps = state => {\n  return {\n    courses: state.courses,\n    displayedCourses: state.displayedCourses,\n    filters: state.filters,\n    resultsPage: state.resultsPage\n  };\n};\n\nexport default connect(mapStateToProps, {\n  setCourses,\n  setSearchPageFiltersCourseLevel,\n  setSearchPageFiltersCourseNextSemester,\n  setSearchPageFiltersCourseRequirements,\n  setSearchPageFiltersCourseCreditHours,\n  setSearchPageFiltersTimeofDay,\n  resetSearchPageFilters\n})(FiltersCard);\n\nvar _c;\n\n$RefreshReg$(_c, \"FiltersCard\");","map":{"version":3,"sources":["/Users/sam4munro/Desktop/webdev/portfolio/easyscore/the-easy-score/src/screens/searchresults/components/filters/FiltersCard.js"],"names":["React","useEffect","connect","setSearchPageFiltersCourseLevel","setSearchPageFiltersCourseNextSemester","setSearchPageFiltersCourseRequirements","setSearchPageFiltersCourseCreditHours","setSearchPageFiltersTimeofDay","resetSearchPageFilters","setCourses","requirementsValues","courseLevelFilterValues","creditHoursValues","timeofDayValues","FilterSelect","Card","Button","Form","FiltersCard","props","handleSwitchChange","e","resultsPage","filtersCard","next_sem","value","handleChange","target","name","applyFilters","setCurrentPage","courses","semesterFilteredCourses","filter","course","taught_next_semester","filterByTime","timeofDay","length","filteredCourses","instructorsWithValue","instructors","some","timings","timing","filterByCourseLevel","lowerLevelCourses","code","middleLevelCourses","upperLevelCourses","graduateLevelCourses","courseLevel","filterByCreditHours","creditHours","creditsFilteredCourses","credits","filterByRequirements","requirements","requirementsFilteredCourses","desiredCredits","credits_fulfilled","credit","handleFiltersReset","preventDefault","mapStateToProps","state","displayedCourses","filters"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport {\n  setSearchPageFiltersCourseLevel,\n  setSearchPageFiltersCourseNextSemester,\n  setSearchPageFiltersCourseRequirements,\n  setSearchPageFiltersCourseCreditHours,\n  setSearchPageFiltersTimeofDay,\n  resetSearchPageFilters,\n} from \"../../../../actions/filtersActions\";\n\nimport { setCourses } from \"../../../../actions/fetchDataActions\";\n\nimport {\n  requirementsValues,\n  courseLevelFilterValues,\n  creditHoursValues,\n  timeofDayValues,\n} from \"../../../../data/FilterSelectsData\";\n\nimport FilterSelect from \"../../../../components/FilterSelect\";\n\nimport { Card, Button, Form } from \"react-bootstrap\";\n\nimport \"../../results.css\";\n\nconst FiltersCard = (props) => {\n  const handleSwitchChange = (e) => {\n    if (props.resultsPage.filtersCard.next_sem.value === 1) {\n      props.setSearchPageFiltersCourseNextSemester(0);\n      // applyFilters(0);\n    }\n    if (props.resultsPage.filtersCard.next_sem.value === 0) {\n      props.setSearchPageFiltersCourseNextSemester(1);\n      // applyFilters(1);\n    }\n    // applyFilters();\n  };\n\n  const handleChange = (e) => {\n    if (e.target.name === \"courseLevel\") {\n      props.setSearchPageFiltersCourseLevel(e.target.value);\n    } else if (e.target.name === \"creditHours\") {\n      props.setSearchPageFiltersCourseCreditHours(e.target.value);\n    } else if (e.target.name === \"timeofDay\") {\n      props.setSearchPageFiltersTimeofDay(e.target.value);\n    } else if (e.target.name === \"requirements\") {\n      props.setSearchPageFiltersCourseRequirements(e.target.value);\n    } else {\n    }\n    // applyFilters();\n  };\n\n  const applyFilters = () => {\n    props.setCurrentPage(1);\n\n    props.setCourses(props.courses);\n\n    // functions all depend on one-another, the filters are all activated by calling filterByRequirements\n    // eslint-disable-next-line array-callback-return\n    const semesterFilteredCourses = props.courses.filter((course) => {\n      if (props.resultsPage.filtersCard.next_sem.value === 0) {\n        return course.taught_next_semester === false;\n      } else if (props.resultsPage.filtersCard.next_sem.value === 1) {\n        return course.taught_next_semester === true;\n      }\n    });\n\n    const filterByTime = (semesterFilteredCourses) => {\n      if (\n        props.resultsPage.filtersCard.timeofDay.value !== \"\" &&\n        semesterFilteredCourses.length > 0\n      ) {\n        let filteredCourses = semesterFilteredCourses.filter((course) => {\n          let instructorsWithValue = course.instructors.some(({ timings }) =>\n            timings[0].some(\n              (timing) =>\n                timing === props.resultsPage.filtersCard.timeofDay.value\n            )\n          );\n          return instructorsWithValue;\n        });\n        return filteredCourses;\n      } else {\n        return semesterFilteredCourses;\n      }\n    };\n\n    const filterByCourseLevel = () => {\n      const lowerLevelCourses = filterByTime(semesterFilteredCourses).filter(\n        (course) => {\n          return course.code <= 299;\n        }\n      );\n      const middleLevelCourses = filterByTime(semesterFilteredCourses).filter(\n        (course) => {\n          return course.code >= 300 && course.code <= 399;\n        }\n      );\n      const upperLevelCourses = filterByTime(semesterFilteredCourses).filter(\n        (course) => {\n          return course.code >= 400 && course.code <= 499;\n        }\n      );\n      const graduateLevelCourses = filterByTime(semesterFilteredCourses).filter(\n        (course) => {\n          return course.code > 499;\n        }\n      );\n\n      if (props.resultsPage.filtersCard.courseLevel.value === 12) {\n        return lowerLevelCourses;\n      } else if (props.resultsPage.filtersCard.courseLevel.value === 8) {\n        return middleLevelCourses;\n      } else if (props.resultsPage.filtersCard.courseLevel.value === 9) {\n        return upperLevelCourses;\n      } else if (props.resultsPage.filtersCard.courseLevel.value === 10) {\n        return graduateLevelCourses;\n      } else if (props.resultsPage.filtersCard.courseLevel.value === \"\") {\n        return filterByTime(semesterFilteredCourses);\n      } else {\n        return filterByTime(semesterFilteredCourses);\n      }\n    };\n\n    const filterByCreditHours = () => {\n      if (props.resultsPage.filtersCard.creditHours.value !== \"\") {\n        const creditsFilteredCourses = filterByCourseLevel().filter(\n          (course) => {\n            return (\n              course.credits === props.resultsPage.filtersCard.creditHours.value\n            );\n          }\n        );\n        return creditsFilteredCourses;\n      } else {\n        return filterByCourseLevel();\n      }\n    };\n\n    const filterByRequirements = () => {\n      if (props.resultsPage.filtersCard.requirements.value !== \"\") {\n        const requirementsFilteredCourses = filterByCreditHours().filter(\n          (course) => {\n            let desiredCredits = course.credits_fulfilled.some(\n              (credit) =>\n                credit === props.resultsPage.filtersCard.requirements.value\n            );\n            return desiredCredits;\n          }\n        );\n        return props.setCourses(requirementsFilteredCourses);\n      } else return props.setCourses(filterByCreditHours());\n    };\n    filterByRequirements();\n  };\n\n  const handleFiltersReset = (e) => {\n    e.preventDefault();\n    props.resetSearchPageFilters();\n    props.setCourses(props.courses);\n  };\n\n  // filters reset and are applied on initial page render\n  useEffect(() => {\n    props.resetSearchPageFilters();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // filters are applied on every handleChange\n  useEffect(() => {\n    applyFilters();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    props.resultsPage.filtersCard.next_sem.value,\n    props.resultsPage.filtersCard.courseLevel.value,\n    props.resultsPage.filtersCard.requirements.value,\n    props.resultsPage.filtersCard.creditHours.value,\n    props.resultsPage.filtersCard.timeofDay.value,\n    resetSearchPageFilters,\n  ]);\n\n  return (\n    <div className=\"mb-5\">\n      <Card>\n        <Card.Body>\n          <Card.Title className=\"mb-2 text-muted filterCardTitle\">\n            Filter courses\n          </Card.Title>\n          <hr></hr>\n          <br />\n\n          <Card.Subtitle className=\"mb-2 text-muted filterCardBtnLabel\">\n            Avail. Next Term\n          </Card.Subtitle>\n          <Form.Check\n            className=\"filterCardSwitch switch-danger\"\n            type=\"switch\"\n            id=\"course-filter-next-semester-switch\"\n            checked={props.resultsPage.filtersCard.next_sem.value === 1}\n            value={props.resultsPage.filtersCard.next_sem.value}\n            // label=\"Next Semester Only\"\n            onChange={handleSwitchChange}\n          />\n          <br />\n\n          <FilterSelect\n            select_id={\"courseLevel\"}\n            handleSelectChange={handleChange}\n            selectValues={courseLevelFilterValues}\n            selectValue={props.resultsPage.filtersCard.courseLevel.value}\n          />\n          <br />\n\n          <FilterSelect\n            select_id={\"requirements\"}\n            handleSelectChange={handleChange}\n            selectValues={requirementsValues}\n            selectValue={props.resultsPage.filtersCard.requirements.value}\n          />\n          <br />\n\n          <FilterSelect\n            select_id={\"creditHours\"}\n            handleSelectChange={handleChange}\n            selectValues={creditHoursValues}\n            selectValue={props.resultsPage.filtersCard.creditHours.value}\n          />\n          <br />\n\n          <FilterSelect\n            select_id={\"timeofDay\"}\n            handleSelectChange={handleChange}\n            selectValues={timeofDayValues}\n            selectValue={props.resultsPage.filtersCard.timeofDay.value}\n          />\n          <br />\n          <br />\n          <div className=\"filterBtnContainer\">\n            {/* <Button className=\"filterBtn\" onClick={applyFilters}>\n              Apply\n            </Button> */}\n            <Button className=\"filterBtn\" onClick={handleFiltersReset}>\n              Reset\n            </Button>\n          </div>\n        </Card.Body>\n      </Card>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    courses: state.courses,\n    displayedCourses: state.displayedCourses,\n    filters: state.filters,\n    resultsPage: state.resultsPage,\n  };\n};\n\nexport default connect(mapStateToProps, {\n  setCourses,\n  setSearchPageFiltersCourseLevel,\n  setSearchPageFiltersCourseNextSemester,\n  setSearchPageFiltersCourseRequirements,\n  setSearchPageFiltersCourseCreditHours,\n  setSearchPageFiltersTimeofDay,\n  resetSearchPageFilters,\n})(FiltersCard);\n"]},"metadata":{},"sourceType":"module"}